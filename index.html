<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy 50th Birthday, Appa!</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
  <style>
    .sports-font {
      font-family: 'Anton', sans-serif;
    }
    .bg-cowboys {
      background: linear-gradient(to bottom, #041E42, #869397);
    }
    .carousel-container {
      perspective: 1000px;
      background: linear-gradient(135deg, #1a202c 0%, #2d3748 50%, #4a5568 100%);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
    }
    .carousel-container::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
      background-size: 20px 20px;
      animation: float 20s ease-in-out infinite;
    }
    .carousel-container::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 30%, rgba(66, 153, 225, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(236, 201, 75, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(167, 85, 221, 0.05) 0%, transparent 50%);
      pointer-events: none;
    }
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-10px) rotate(180deg); }
    }
    .carousel-item {
      transition: transform 0.3s;
      opacity: 1 !important;
    }
    .carousel-item:hover {
      transform: scale(1.05);
    }
    
    /* Modal styles for full-size image display */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      animation: fadeIn 0.3s ease-in-out;
    }
    
    .modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .modal-content {
      max-width: 90%;
      max-height: 90%;
      object-fit: contain;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
      animation: zoomIn 0.3s ease-in-out;
    }
    
    .modal-close {
      position: absolute;
      top: 20px;
      right: 30px;
      color: white;
      font-size: 40px;
      font-weight: bold;
      cursor: pointer;
      transition: color 0.3s;
    }
    
    .modal-close:hover {
      color: #ff6b6b;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes zoomIn {
      from { transform: scale(0.8); }
      to { transform: scale(1); }
    }

    /* Error handling styles */
    .error-message {
      color: #ff6b6b;
      background: rgba(255, 107, 107, 0.1);
      border: 1px solid rgba(255, 107, 107, 0.3);
      padding: 10px;
      border-radius: 8px;
      margin: 10px 0;
    }

    .loading-message {
      color: #4299e1;
      background: rgba(66, 153, 225, 0.1);
      border: 1px solid rgba(66, 153, 225, 0.3);
      padding: 10px;
      border-radius: 8px;
      margin: 10px 0;
      text-align: center;
    }

    /* Responsive improvements */
    @media (max-width: 768px) {
      .carousel-item {
        width: 250px;
        height: 250px;
      }
      
      .modal-content {
        max-width: 95%;
        max-height: 80%;
      }
      
      .modal-close {
        top: 10px;
        right: 15px;
        font-size: 30px;
      }
    }
  </style>
</head>
<body class="text-white bg-cowboys">

  <!-- Hero Section -->
  <section class="text-center py-20 px-4 bg-cover bg-center" style="background-image: url('https://upload.wikimedia.org/wikipedia/commons/1/15/AT%26T_Stadium_field.jpg');">
    <div class="bg-black bg-opacity-60 p-8 rounded">
      <h1 class="text-5xl sports-font mb-4">Happy 50th Birthday, Appa!</h1>
    </div>
  </section>

  <!-- Welcome Message -->
  <section class="bg-gray-100 py-12 px-4 text-black">
    <div class="max-w-4xl mx-auto text-center">
      <h2 class="text-3xl font-bold sports-font mb-8">Welcome to the Magazine</h2>
      <p class="text-lg mb-8">Chechi has been working on this magazine for months now and this is <br>so you can show it off to your friends!</p>
    
      <div id="magazine-container" class="relative">
        <div id="magazine-pages" class="flex transition-all duration-500 ease-in-out">
          <!-- Magazine pages will be loaded here -->
          <div class="flex-shrink-0 w-full md:w-1/2 px-2">
            <div class="loading-message">Loading magazine pages...</div>
          </div>
        </div>
        <div class="flex justify-between mt-4">
          <button onclick="prevPage()" class="bg-gray-800 text-white px-4 py-2 rounded hover:bg-gray-700 disabled:opacity-50" disabled>⬅️ Prev</button>
          <button onclick="nextPage()" class="bg-gray-800 text-white px-4 py-2 rounded hover:bg-gray-700">Next ➡️</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Video Messages -->
  <section class="bg-gray-900 py-12 px-4">
    <div class="max-w-5xl mx-auto">
      <h2 class="text-3xl font-bold sports-font text-center mb-8">Messages from the Locker Room</h2>
      <details class="bg-white text-black rounded shadow p-4 mb-8">
        <summary class="cursor-pointer text-xl font-semibold">Click to view videos</summary>
        <div id="video-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4">
          <div class="loading-message text-white bg-gray-700">Loading videos...</div>
        </div>
      </details>
      
      <!-- Audio Messages -->
      <details class="bg-white text-black rounded shadow p-4">
        <summary class="cursor-pointer text-xl font-semibold">Click to view audio messages</summary>
        <div id="audio-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4">
          <div class="loading-message">Loading audio messages...</div>
        </div>
      </details>
    </div>
  </section>
       
  <!-- Memory Carousel -->
  <section class="py-12 px-4 bg-gray-800">
    <div class="max-w-6xl mx-auto">
      <h2 class="text-3xl font-bold sports-font text-center mb-8">Memory Carousel</h2>
      <div class="relative carousel-container">
        <div id="carousel" class="flex gap-6 px-4 transition-all duration-500 ease-in-out overflow-hidden relative z-10">
          <div class="loading-message">Loading memories...</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Modal for full-size image display -->
  <div id="imageModal" class="modal">
    <span class="modal-close" onclick="closeModal()">&times;</span>
    <img id="modalImage" class="modal-content" alt="Full size image">
  </div>

  <script>
    // Configuration - Update these paths based on your GitHub Pages structure
    const CONFIG = {
      magazinePages: ['MagazinePages/starting(1).jpg', 'MagazinePages/starting(2).jpg', 'MagazinePages/starting(3).jpg', 'MagazinePages/starting(4).jpg', 'MagazinePages/starting(5).jpg', 'MagazinePages/starting(6).jpg', 'MagazinePages/starting(7).jpg', 'MagazinePages/starting(8).jpg', 'MagazinePages/starting(9).jpg', 'MagazinePages/starting(10).jpg', 'MagazinePages/starting(11).jpg', 'MagazinePages/starting(12).jpg', 'MagazinePages/starting(13).jpg', 'MagazinePages/starting(14).jpg', 'MagazinePages/starting(15).jpg', 'MagazinePages/starting(16).jpg', 'MagazinePages/starting(17).jpg', 'MagazinePages/starting(18).jpg', 'MagazinePages/starting(19).jpg', 'MagazinePages/starting(20).jpg', 'MagazinePages/starting(21).jpg', 'MagazinePages/starting(22).jpg', 'MagazinePages/starting(23).jpg', 'MagazinePages/starting(24).jpg', 'MagazinePages/starting(25).jpg', 'MagazinePages/starting(26).jpg', 'MagazinePages/starting(27).jpg', 'MagazinePages/starting(28).jpg',
      'MagazinePages/4.jpg', 'MagazinePages/5.jpg', 'MagazinePages/6.jpg', 'MagazinePages/7.jpg', 'MagazinePages/8.jpg', 'MagazinePages/9.jpg', 'MagazinePages/10.jpg', 'MagazinePages/11.jpg', 'MagazinePages/12.jpg', 'MagazinePages/13.jpg', 'MagazinePages/14.jpg', 'MagazinePages/15.jpg', 'MagazinePages/16.jpg', 'MagazinePages/17.jpg', 'MagazinePages/18.jpg', 'MagazinePages/19.jpg', 'MagazinePages/20.jpg', 'MagazinePages/21.jpg', 'MagazinePages/22.jpg', 'MagazinePages/23.jpg', 'MagazinePages/24.jpg', 'MagazinePages/25.jpg', 'MagazinePages/26.jpg', 'MagazinePages/27.jpg', 
'MagazinePages/28.jpg', 'MagazinePages/29.jpg', 'MagazinePages/30.jpg', 'MagazinePages/31.jpg', 'MagazinePages/32.jpg', 'MagazinePages/33.jpg', 'MagazinePages/34.jpg', 'MagazinePages/35.jpg', 'MagazinePages/36.jpg', 'MagazinePages/37.jpg', 'MagazinePages/38.jpg', 'MagazinePages/39.jpg', 'MagazinePages/40.jpg', 'MagazinePages/41.jpg', 'MagazinePages/42.jpg', 'MagazinePages/43.jpg', 'MagazinePages/44.jpg', 'MagazinePages/45.jpg', 'MagazinePages/46.jpg', 'MagazinePages/47.jpg', 'MagazinePages/48.jpg', 'MagazinePages/49.jpg', 'MagazinePages/50.jpg', 'MagazinePages/51.jpg', 'MagazinePages/52.jpg', 'MagazinePages/53.jpg', 'MagazinePages/54.jpg', 'MagazinePages/55.jpg', 'MagazinePages/56.jpg', 'MagazinePages/57.jpg', 'MagazinePages/58.jpg', 'MagazinePages/59.jpg', 'MagazinePages/60.jpg', 
'MagazinePages/61.jpg', 'MagazinePages/62.jpg', 'MagazinePages/63.jpg', 'MagazinePages/64.jpg', 'MagazinePages/65.jpg', 'MagazinePages/66.jpg', 'MagazinePages/67.jpg', 'MagazinePages/68.jpg', 'MagazinePages/69.jpg', 'MagazinePages/70.jpg', 'MagazinePages/71.jpg', 'MagazinePages/72.jpg', 'MagazinePages/73.jpg', 'MagazinePages/74.jpg', 'MagazinePages/75.jpg', 'MagazinePages/76.jpg', 'MagazinePages/77.jpg', 'MagazinePages/78.jpg', 'MagazinePages/79.jpg', 'MagazinePages/80.jpg', 'MagazinePages/81.jpg', 'MagazinePages/82.jpg'],
      videoPaths: [
        'Videos/21687643-f4c7-4aa3-9967-88ece951610f.mp4',
        'Videos/a098ce47-e383-4cfa-91bb-8c49af7fd61e.mp4',
        'Videos/b3b7c28b-7725-4361-b8a3-14708884d4d8.mp4',
        'Videos/f12d16f6-4afe-4ba2-af61-dce04229d958.mp4',
        'Videos/a0dec136-5473-42b4-8e51-2324e652bbb3.mp4',
        'Videos/IMG_5953.mp4',
        'Videos/IMG_7917.mp4',
        'Videos/835ebdc2-4127-4604-8b06-a7b1a64bd610.mp4',
        'Videos/WhatsApp Video 2025-07-25 at 3.28.51 PM.mp4',
        'Videos/4104773a-9b0f-40ed-9ace-4161750935d4.mp4',
        'Videos/WhatsApp Video 2025-07-25 at 3.28.33 PM.mp4',
        'Videos/e19a0d6a-cde9-41ea-8303-cf47fb222e85.mp4'
      ],
      audioPaths: [
        'Audio/sample-audio.mp3'
      ]
    };

    // Magazine Navigation
    let pageIndex = 0;
    let totalPages = 0;

    async function loadMagazinePages() {
      const pagesContainer = document.getElementById('magazine-pages');
      const prevBtn = document.querySelector('button[onclick="prevPage()"]');
      const nextBtn = document.querySelector('button[onclick="nextPage()"]');
      
      try {
        pagesContainer.innerHTML = '';
        
        // Load magazine pages
        for (let i = 0; i < CONFIG.magazinePages.length; i++) {
          const pageDiv = document.createElement('div');
          pageDiv.className = 'flex-shrink-0 w-full md:w-1/2 px-2';
          
          const img = document.createElement('img');
          img.src = CONFIG.magazinePages[i];
          img.alt = `Page ${i + 1}`;
          img.className = 'rounded shadow mx-auto cursor-pointer hover:opacity-90 transition-opacity';
          img.onerror = () => {
            // Fallback to placeholder if image fails to load
            img.src = `https://via.placeholder.com/420x600/cccccc/666666?text=Page+${i + 1}`;
          };
          
          // Add click to enlarge functionality
          img.addEventListener('click', () => {
            openModal(img.src, img.alt);
          });
          
          pageDiv.appendChild(img);
          pagesContainer.appendChild(pageDiv);
        }
        
        totalPages = Math.max(0, CONFIG.magazinePages.length - 1);
        updateMagazineButtons();
        
      } catch (error) {
        console.error('Error loading magazine pages:', error);
        pagesContainer.innerHTML = '<div class="error-message">Failed to load magazine pages</div>';
      }
    }

    function updateMagazine() {
      const pages = document.getElementById('magazine-pages');
      const offset = pageIndex * 100;
      pages.style.transform = `translateX(-${offset}%)`;
      updateMagazineButtons();
    }

    function updateMagazineButtons() {
      const prevBtn = document.querySelector('button[onclick="prevPage()"]');
      const nextBtn = document.querySelector('button[onclick="nextPage()"]');
      
      prevBtn.disabled = pageIndex === 0;
      nextBtn.disabled = pageIndex >= totalPages;
    }

    function nextPage() {
      if (pageIndex < totalPages) {
        pageIndex++;
        updateMagazine();
      }
    }

    function prevPage() {
      if (pageIndex > 0) {
        pageIndex--;
        updateMagazine();
      }
    }

    // Video loading
    async function loadVideos() {
      const container = document.getElementById('video-container');
      
      try {
        container.innerHTML = '';
        
        for (const videoPath of CONFIG.videoPaths) {
          const videoDiv = document.createElement('div');
          videoDiv.className = 'bg-white text-black p-4 rounded shadow';
          
          const video = document.createElement('video');
          video.controls = true;
          video.className = 'w-full rounded';
          video.src = videoPath;
          video.onerror = () => {
            videoDiv.innerHTML = `<div class="error-message">Video not found: ${videoPath.split('/').pop()}</div>`;
          };
          
          videoDiv.appendChild(video);
          container.appendChild(videoDiv);
        }
        
      } catch (error) {
        console.error('Error loading videos:', error);
        container.innerHTML = '<div class="error-message">Failed to load videos</div>';
      }
    }

    // Audio loading
    async function loadAudio() {
      const container = document.getElementById('audio-container');
      
      try {
        container.innerHTML = '';
        
        for (let i = 0; i < CONFIG.audioPaths.length; i++) {
          const audioDiv = document.createElement('div');
          audioDiv.className = 'bg-white text-black p-4 rounded shadow';
          
          const audio = document.createElement('audio');
          audio.controls = true;
          audio.className = 'w-full';
          
          const source = document.createElement('source');
          source.src = CONFIG.audioPaths[i];
          source.type = 'audio/mpeg';
          
          audio.appendChild(source);
          audio.innerHTML += 'Your browser does not support the audio element.';
          
          const nameP = document.createElement('p');
          nameP.className = 'mt-2 text-center font-semibold';
          nameP.textContent = `Audio Message ${i + 1}`;
          
          audio.onerror = () => {
            audioDiv.innerHTML = `<div class="error-message">Audio not found: ${CONFIG.audioPaths[i].split('/').pop()}</div>`;
          };
          
          audioDiv.appendChild(audio);
          audioDiv.appendChild(nameP);
          container.appendChild(audioDiv);
        }
        
      } catch (error) {
        console.error('Error loading audio:', error);
        container.innerHTML = '<div class="error-message">Failed to load audio files</div>';
      }
    }
    
    // Utility functions
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Carousel functionality with better error handling
    async function fetchImageList() {
      try {
        const response = await fetch('Photos/images.json');
        if (!response.ok) throw new Error('Failed to fetch image list');
        return await response.json();
      } catch (error) {
        console.error('Error loading image list:', error);
        // Enhanced fallback with more placeholder images
        return [
          'https://picsum.photos/300/200?random=1',
          'https://picsum.photos/300/200?random=2',
          'https://picsum.photos/300/200?random=3',
          'https://picsum.photos/300/200?random=4',
          'https://picsum.photos/300/200?random=5',
          'https://picsum.photos/300/200?random=6',
          'https://picsum.photos/300/200?random=7',
          'https://picsum.photos/300/200?random=8',
          'https://picsum.photos/300/200?random=9',
          'https://picsum.photos/300/200?random=10',
          'https://picsum.photos/300/200?random=11',
          'https://picsum.photos/300/200?random=12'
        ];
      }
    }

    async function loadCarouselImages() {
      const carousel = document.getElementById('carousel');
      
      try {
        carousel.innerHTML = '<div class="loading-message">Loading memories...</div>';
        
        const imageList = await fetchImageList();
        shuffleArray(imageList);

        carousel.innerHTML = '';

        imageList.forEach((src, index) => {
          const img = document.createElement('img');
          // Check if it's a URL or a local file
          img.src = src.startsWith('http') ? src : `Photos/${src}`;
          img.alt = `Memory ${index + 1}`;
          img.className = 'carousel-item w-80 h-80 object-cover rounded shadow flex-shrink-0 cursor-pointer transition-transform duration-300 hover:scale-105';
          
          // Add error handling for individual images
          img.onerror = () => {
            img.src = `https://via.placeholder.com/320x320/cccccc/666666?text=Memory+${index + 1}`;
          };
          
          // Add click event to show full-size image
          img.addEventListener('click', () => {
            openModal(img.src, img.alt);
          });
          
          carousel.appendChild(img);
        });
        
      } catch (error) {
        console.error('Error loading carousel:', error);
        carousel.innerHTML = '<div class="error-message">Failed to load photo memories</div>';
      }
    }

    let autoScrollInterval;
    let isAutoScrolling = true;
    let scrollSpeed = 1;

    function startAutoScroll() {
      const carousel = document.getElementById('carousel');
      if (autoScrollInterval) clearInterval(autoScrollInterval);
      
      function smoothScroll() {
        if (carousel.children.length > 0 && isAutoScrolling) {
          const maxScroll = carousel.scrollWidth - carousel.clientWidth;
          
          if (carousel.scrollLeft >= maxScroll) {
            carousel.scrollLeft = 0;
          } else {
            carousel.scrollLeft += scrollSpeed;
          }
        }
        
        if (isAutoScrolling) {
          requestAnimationFrame(smoothScroll);
        }
      }
      
      requestAnimationFrame(smoothScroll);
    }

    // Initialize everything when page loads
    window.addEventListener('load', async () => {
      // Load all content
      await Promise.all([
        loadMagazinePages(),
        loadVideos(),
        loadAudio(),
        loadCarouselImages()
      ]);
      
      const carousel = document.getElementById('carousel');
      
      // Setup carousel interactions
      carousel.addEventListener('mouseenter', () => {
        isAutoScrolling = false;
      });
      
      carousel.addEventListener('mouseleave', () => {
        isAutoScrolling = true;
        startAutoScroll();
      });
      
      // Start auto-scrolling
      startAutoScroll();
      
      // Setup visibility observer
      setupVisibilityObserver();
    });

    // Modal functions
    function openModal(imageSrc, imageAlt) {
      const modal = document.getElementById('imageModal');
      const modalImage = document.getElementById('modalImage');
      
      modalImage.src = imageSrc;
      modalImage.alt = imageAlt;
      modal.classList.add('show');
      
      isAutoScrolling = false;
    }

    function closeModal() {
      const modal = document.getElementById('imageModal');
      modal.classList.remove('show');
      
      setTimeout(() => {
        isAutoScrolling = true;
        startAutoScroll();
      }, 500);
    }

    function setupVisibilityObserver() {
      const carousel = document.getElementById('carousel');
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            if (!carousel.matches(':hover')) {
              isAutoScrolling = true;
              startAutoScroll();
            }
          } else {
            isAutoScrolling = false;
          }
        });
      }, {
        threshold: 0.1
      });
      
      observer.observe(carousel);
    }

    // Modal event listeners
    document.getElementById('imageModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeModal();
      }
    });

    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        closeModal();
      }
    });
  </script>
</body>
</html>